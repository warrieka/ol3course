<!DOCTYPE html>
<html>
  <head>
    <title>Les 4</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <!--kaart-->
    <link rel="stylesheet" href="../css/ol.css" type="text/css">
    <script src="/src/ol-debug.js" type="text/javascript"></script>
    <script src="/src/proj4.js" type="text/javascript"></script>
    <script src="http://epsg.io/31370.js" type="text/javascript"></script>
    <style>
        #map { height: 100%; width: 100%; background-color: #b0c4de; }   
        .wrapper { position: absolute; top:0;bottom:0;right:0;left:0; overflow: hidden}
        .mapTab { width: 100%; height: calc(100% - 20px ); border: 1px solid black; }
        .legendeTab { height: 20px }
     </style>

  </head>
  <body>
    <div class="wrapper">
        <div class="mapTab">
            <div id="map"></div>
        </div>
        <div class="legendeTab">
             <div id="info"></div>
        </div>
     </div> 
     <script type="text/javascript">
        var vectorSource  = new ol.source.GeoJSON({
            projection: 'EPSG:3857',
            defaultProjection: 'EPSG:4326',
            url: "/resource/zendmast.geojson"
        });

        var iconStyle = new ol.style.Style({
            image: new ol.style.Icon({
                src: '/images/marker-icon.png'
            })
        });

        var vectorLayer = new ol.layer.Vector({
            source: vectorSource,
            style: iconStyle
        });

        var grb = new ol.layer.Tile({
            source: new ol.source.XYZ({
                url: 'http://grb.agiv.be/geodiensten/raadpleegdiensten/geocache/tms/1.0.0/grb_bsk@GoogleMapsVL/{z}/{x}/{-y}.png'
            })    
        }); 

        var map = new ol.Map({
                target: 'map',
                layers: [ grb , vectorLayer],
                view: new ol.View({
                    projection: 'EPSG:3857',
                    center: ol.proj.transform([4,51], 'EPSG:4326', 'EPSG:3857'),
                    zoom: 12,
                    maxZoom: 21
                })
            });

        $(map.getViewport()).on('mousemove', function(evt) {
        var pixel = map.getEventPixel(evt.originalEvent);
        displayFeatureInfo(pixel);
        });

        var displayFeatureInfo = function(pixel) {
            var feature = map.forEachFeatureAtPixel(pixel, function(feature, layer) {
                return feature;
            });

            if (feature) {
                $('#info').html( feature.get('OPERATOR'));
            } else {
                $('#info').html( '' );
                }
            };
     </script>
  </body>
</html>